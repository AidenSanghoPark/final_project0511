<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dsn.review">
	<select id="reviewList" resultType="Map">
		select * from 
			(select rownum as rnum, a.* from  
			(select r.u_idx, r.rv_content, r.rv_date, d.d_img_1, d.c_cate
			 from f_review r, f_designer d
			 order by u_idx desc)a)b
		where
			rnum <![CDATA[>=]]> #{start}
		and
			rnum <![CDATA[<=]]> #{end}
	</select>
	<select id="reviewListTotalCnt" resultType="Integer">
		select count(*) from f_review
	</select>	<insert id="writeReview" parameterType="Map">
  		insert into f_review values(
  			rv_idx.nextval,
  			0,
  			#{u_idx},
  			#{rv_content},
  			sysdate
  		)
  	</insert>
  	<select id="review" parameterType="Map" resultType="dsn.review.model.ReviewDTO">
  		select * from 
			(select rownum as rnum, a.* from
			(select * from f_review order by u_idx desc)a)b
		where
			rnum <![CDATA[>=]]> #{start}
		and
			rnum <![CDATA[<=]]> #{end}
  	</select>
  	<select id="reviewTotalCnt" resultType="Integer">
		select count(*) from f_review
	</select>
</mapper>
